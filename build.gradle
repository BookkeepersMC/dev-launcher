plugins {
    id 'java'
    id 'maven-publish'
    id 'checkstyle'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

group = 'com.bookkeepersmc'
archivesBaseName = 'dev-launcher'
version = '0.1.0'

sourceSets {
    main {
        java.srcDirs = ['src']
    }
}

repositories {
    mavenCentral()
}

checkstyle {
    configFile = file("checkstyle.xml")
    toolVersion = '8.25'
}

tasks.withType(JavaCompile).configureEach {
    if (JavaVersion.current().isJava9Compatible()) {
        options.release.set(8)
    } else {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }
}

java {
    withSourcesJar()
    withJavadocJar()
}

publishing {
    publications {
        create("mavenJava", MavenPublication) {
            from components.java
        }
    }

    repositories {
        maven {
            url = "file://${project.rootDir}/m2/"
        }
    }
}
